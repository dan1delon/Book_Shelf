import{a as b,S as z}from"./assets/vendor-3d873957.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();function T(t){const e=document.body,o=document.getElementById("toggle");t==="dark-mode"?(e.classList.add("dark-theme"),o.checked=!0):(e.classList.remove("dark-theme"),o.checked=!1)}document.addEventListener("DOMContentLoaded",()=>{const t=localStorage.getItem("theme");t&&T(t)});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("toggle");t.addEventListener("change",()=>{const e=t.checked?"dark-mode":"light-mode";T(e),localStorage.setItem("theme",e)})});document.addEventListener("DOMContentLoaded",()=>{const t=window.location.pathname,e=document.getElementById("home-link"),o=document.getElementById("shopping-list-link");t==="/"?(e.classList.add("button"),o.classList.remove("button")):t==="/partials/shopping-list.html"&&(e.classList.remove("button"),o.classList.add("button"))});document.addEventListener("DOMContentLoaded",()=>{const t=window.location.pathname,e=document.getElementById("backdrop-home-link"),o=document.getElementById("backdrop-shopping-list-link");t==="/"?(e.classList.add("button"),o.classList.remove("button")):t==="/partials/shopping-list.html"&&(e.classList.remove("button"),o.classList.add("button"))});function E(){const t=document.getElementById("burger"),e=document.getElementById("backdrop"),o=document.querySelector(".icon-logo"),i=document.querySelector(".nav-links"),n=document.getElementById("x-close");t.checked?(t.checked=!1,e.style.display="none",i.style.height="0",n.style.display="none",o.style.display="block"):(t.checked=!0,e.style.display="block",i.style.height="100vh",n.style.display="block",o.style.display="none")}document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".icon-logo"),e=document.getElementById("x-close");t.addEventListener("click",E),e.addEventListener("click",E)});function F(){window.scrollTo({top:0,behavior:"smooth"})}window.onscroll=function(){J()};function J(){document.documentElement.scrollTop>250?document.getElementById("scrollUpButton").style.display="block":document.getElementById("scrollUpButton").style.display="none"}document.getElementById("scrollUpButton").addEventListener("click",F);async function R(){const{data:t}=await b.get("https://books-backend.p.goit.global/books/category-list");return t}async function $(){const{data:t}=await b.get("https://books-backend.p.goit.global/books/top-books");return t}async function M(t){const{data:e}=await b.get(`https://books-backend.p.goit.global/books/category?category=${t}`);return e}async function K(t){const{data:e}=await b.get(`https://books-backend.p.goit.global/books/${t}`);return e}const k=document.querySelector(".category-list"),g=document.querySelector(".books-list"),G=document.querySelector(".books-section-title");async function V(){try{const t=await R();if(t.length===0)throw new Error;const o=t.map(({list_name:i})=>i).sort((i,n)=>i.localeCompare(n)).map(i=>Y(i)).join("");k.insertAdjacentHTML("beforeend",o)}catch(t){console.error(t)}}V();function Y(t){return`<li class="category-item">
    <button class="category-btn" type="button" data-list-name="${t}">${t}</button>
  </li>`}async function Z(){try{G.style.display="none";const t=await $();if(t.length===0)throw new Error;const e=Q(t,"Best Sellers Books");g.innerHTML=e}catch(t){console.error(t),g.innerHTML="<h2>Try reloading the page...</h2>"}}function Q(t,e){return`${x(e)}
 <ul class="books-bestsellers">
        ${t.map(({books:n,list_name:s})=>tt(n,s)).join("")}
 </ul>`}async function X(t){try{const e=await M(t);if(e.length===0)throw new Error;const o=q(e,t);g.innerHTML=o}catch(e){console.error(e),g.innerHTML="<h2>Try reloading the page...</h2>"}}A();function q(t,e){return`${x(e)}
        <ul class="books-category">
            ${t.map(n=>_(n)).join("")}
        </ul>`}function tt(t,e){return`<li class="books-bestsellers-item">
            <p class="books-bestsellers-list-name">${e}</p>
            <ul class="books-bestsellers-list">
                ${t.map(o=>_(o)).join("")}
            </ul>
            <button
                class="books-bestsellers-btn"
                type="button"
                data-list-name="${e}">
                See more
            </button>
        </li>`}function _(t){const{_id:e,book_image:o,book_image_width:i,book_image_height:n,publisher:s,title:a}=t;return`<li class="books-item">
        <div class="books-overley-box">
            <img
                class="books-image"
                src="${o}"
                    width="${i}"
                    height="${n}"
                    loading="lazy"
                    data-id="${e}"
                />
            <div class="books-overley">quick view</div>
        </div>
        <h4 class="books-title-book">${a}</h4>
        <span class="books-author">${s}</span>
    </li>`}function x(t){const e=t.split(" "),o=e.splice(length-1,1).join("");return`<h2 class="books-title">${e.join(" ")}
        <span class="books-title-accent">${o}</span>
    </h2>`}let B="";function O(t){const e=t.target,o=e.dataset.listName;e.tagName!=="BUTTON"||B===o||(o!=="bestsellers"?X(o):Z(),B=o,et(o))}function et(t){const o=[...k.querySelectorAll(".category-btn")].find(n=>n.dataset.listName===t),i=k.querySelector(".active");o.classList.add("active"),i.classList.remove("active"),ot(o)}function ot(t){t.scrollIntoView({behavior:"smooth",block:"center"})}k.addEventListener("click",O);g.addEventListener("click",O);async function A(){try{const t=await $(),e=document.querySelector(".books-list");e.innerHTML="";let o=1;window.innerWidth>=768&&window.innerWidth<1440?o=3:window.innerWidth>=1440&&(o=5),I(t,4).map(n=>{const s=document.createElement("li");s.classList.add("category");const a=document.createElement("h2");a.textContent=n.list_name,a.classList.add("category-title"),s.appendChild(a);const d=I(n.books,o),c=document.createElement("ul");c.classList.add("books-container"),d.map(m=>{const h=document.createElement("li");h.classList.add("book-item"),h.setAttribute("id",m._id);const W=`
            <div class = "book-overley-box"><img src="${m.book_image}" alt="${m.title}" class="book-image" data-id="${m.book_id}"><div class = "book-overley">quick view</div></div>
            <h4 class="book-title">${m.title}</h4>
            <span class="book-author">${m.author}</span>
        `;h.innerHTML=W,c.appendChild(h)}),s.appendChild(c);const r=document.createElement("div");r.classList.add("see-more-button-container");const l=document.createElement("button");l.classList.add("see-more-button"),l.textContent="See more",l.addEventListener("click",()=>{nt(n.list_name)}),r.appendChild(l),s.appendChild(r),e.appendChild(s)})}catch(t){console.error("Error fetching books:",t)}}async function nt(t){try{const e=await M(t),o=document.querySelector(".books-list"),i=q(e,t);o.innerHTML=i,document.querySelector(".books-section-title").remove();const s=document.createElement("h1"),a=categoryName.split(" "),d=a.pop();s.innerHTML=a.join(" ")+' <span class="books-section-title-accent">'+d+"</span>",s.classList.add("books-section-title"),o.appendChild(s);const c=document.createElement("div");c.classList.add("books-container"),e.map(r=>{const l=document.createElement("div");l.classList.add("book-item"),l.setAttribute("id",r._id);const m=`
        <div class="book-info book-in-category">
          <img src="${r.book_image}" alt="${r.title}" class="book-image">
          <h3 class="book-title">${r.title}</h3>
          <p class="book-author">${r.author}</p>
        </div>
      `;l.innerHTML=m,c.appendChild(l)}),o.appendChild(c)}catch(e){console.error("Error fetching books:",e)}}function I(t,e){return t.sort(()=>.5-Math.random()).slice(0,e)}A();const st=[{title:"Save the Children",url:"https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis",img:"../img/SupportUkraine/01-found-1.png",width:131,height:32},{title:"Project HOPE",url:"https://www.projecthope.org/country/ukraine/",img:"../img/SupportUkraine/02-found-1.png",width:62,height:32},{title:"UNITED24",url:"https://u24.gov.ua/uk",img:"../img/SupportUkraine/03-found-1.png",width:114,height:32},{title:"International Medical Corps",url:"https://internationalmedicalcorps.org/country/ukraine/",img:"../img/SupportUkraine/04-found-1.png",width:103,height:32},{title:"Medicins Sans Frontieres",url:"https://www.msf.org/ukraine",img:"../img/SupportUkraine/05-found-1.png",width:78,height:32},{title:"RAZOM",url:"https://www.razomforukraine.org/",img:"../img/SupportUkraine/06-found-1.png",width:82,height:32},{title:"Action against hunger",url:"https://www.actionagainsthunger.org/location/europe/ukraine/",img:"../img/SupportUkraine/07-found-1.png",width:55,height:32},{title:"World vision",url:"https://www.wvi.org/emergencies/ukraine",img:"../img/SupportUkraine/08-found-1.png",width:81,height:32},{title:"Serhiy Prytula Charity Foundation",url:"https://prytulafoundation.org/en",img:"../img/SupportUkraine/09-found-1.png",width:115,height:32}],it=document.querySelector(".splide__list");let N=[];st.forEach(({title:t,url:e,img:o,width:i,height:n},s)=>{const a=(s+1).toString().padStart(2,"0"),d=document.createElement("li"),c=document.createElement("a"),r=document.createElement("img"),l=document.createElement("p");r.src=o,r.alt=t,r.width=i,r.height=n,c.href=e,l.textContent=a,c.target="_blank",c.append(r),d.append(l),d.append(c),d.classList.add("splide__slide"),d.classList.add("item-donation"),c.classList.add("item-link-donation"),r.classList.add("item-img-donation"),l.classList.add("p-num-donation"),N.push(d)});it.append(...N);const p=new z(".splide",{direction:"ttb",height:292,pagination:!1,perMove:4,perPage:6,gap:20,fixedHeight:32,arrows:!1,speed:800});p.mount();let f=0;const at=document.querySelector(".scroll-button-donations"),C=document.querySelector(".use-svg");at.addEventListener("click",()=>{f===0?(p.go(p.length-1,!1),f=p.length-1,C.style.transform="rotate(180deg)"):(p.go(0,!1),f=0,C.style.transform="rotate(0deg)")});const u={books:document.querySelector(".books-section"),modal:document.querySelector(".modal-backdrop"),xBtn:document.querySelector(".x-btn"),backdrop:document.querySelector(".modal-backdrop"),oneBook:document.querySelectorAll(".books-item"),modalContent:document.querySelector(".modal-content-wrapper"),descriptionBookEl:document.querySelector(".descr-of-book")};u.books.addEventListener("click",rt);let v=null,L=null;async function rt(t){if(t.preventDefault(),t.target.nodeName!=="IMG")return;const e=t.target.dataset.id;u.modal.classList.add("is-open"),document.body.classList.add("no-scroll"),u.backdrop.addEventListener("click",U),u.xBtn.addEventListener("click",y),window.addEventListener("keydown",H),await lt(e),L=document.querySelector(".add-to-localSt"),L.addEventListener("click",P)}function y(t){u.backdrop.removeEventListener("click",U),u.xBtn.removeEventListener("click",y),window.removeEventListener("keydown",H),L.removeEventListener("click",P),document.body.classList.remove("no-scroll"),u.modal.classList.remove("is-open")}function H(t){t.key==="Escape"&&y()}function U(t){t.target===t.currentTarget&&y()}function P(){const t="selected-books",e=JSON.parse(localStorage.getItem(t))||[],o=v._id,i=e.some(a=>a._id===o);if(i){const a=e.filter(d=>d._id!==o);localStorage.setItem(t,JSON.stringify(a))}else e.push(v),localStorage.setItem(t,JSON.stringify(e));const n=document.querySelector(".add-to-localSt"),s=i?"Add to Shopping List":"Remove from Shopping List";n.textContent=s,ct(!i)}function ct(t){const e=document.querySelector(".add-to-localSt"),o=t?"Remove from Shopping List":"Add to Shopping List";e.textContent=o}async function lt(t){var e;u.modalContent.innerHTML="";try{const o=await K(t),{book_image:i,title:n,author:s,description:a,buy_links:d}=o;v=o;const c=!!((e=JSON.parse(localStorage.getItem("selected-books")))!=null&&e.find(l=>l._id===o._id)),r=`<div class="modal-content">
        <img class="book-img-modal" src="${i}" alt="book-image">
        <div class="modal-text-wrap">
            <div class="name-of-book">
                <h3 class="title-of-book">${n}</h3>
                <p class="author-of-book">${s}</p>
            </div>
            <p class="descr-of-book">${a}</p>
            <div class="buy-links">
                <a href="${d[0].url}" target="_blank" class="amazon-link"><img class="amazon-link-img"
                        src="../img/amazon-shop-1x.png" alt="link"></a>
                <a href="${d[1].url}" target="_blank" class="apple-link"><img class="apple-link-img" src="../img/apple-shop-1x.png"
                        alt="link"></a>
            </div>
           </div>
        </div>
        <button class="add-to-localSt" type="button">${c?"remove from the shopping list":"add to shopping list"}</button>`;u.modalContent.innerHTML=r}catch(o){alert(`Something went wrong. You caught the following error: ${o.message}.`)}}const j=document.getElementById("loading-bar"),dt=document.querySelector(".progress-bar");function w(){j.style.opacity=1}function S(){j.style.opacity=0}function D(t){dt.style.width=`${t}%`}window.addEventListener("load",()=>{w(),D(100),setTimeout(S,500)});const ut=document.querySelectorAll("button");ut.forEach(t=>{t.addEventListener("click",()=>{w();let e=0;const o=setInterval(()=>{e+=10,D(e),e===100&&(clearInterval(o),S())},100)})});document.body.addEventListener("click",t=>{const e=t.target;e.tagName==="A"&&e.href.startsWith("/")&&w()});document.addEventListener("pagehide",S);
//# sourceMappingURL=commonHelpers.js.map
