import{a as h,S as z}from"./assets/vendor-3d873957.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();function C(t){const e=document.body,o=document.getElementById("toggle");t==="dark-mode"?(e.classList.add("dark-theme"),o.checked=!0):(e.classList.remove("dark-theme"),o.checked=!1)}document.addEventListener("DOMContentLoaded",()=>{const t=localStorage.getItem("theme");t&&C(t)});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("toggle");t.addEventListener("change",()=>{const e=t.checked?"dark-mode":"light-mode";C(e),localStorage.setItem("theme",e)})});document.addEventListener("DOMContentLoaded",()=>{const t=window.location.pathname,e=document.getElementById("home-link"),o=document.getElementById("shopping-list-link");t==="/"?(e.classList.add("button"),o.classList.remove("button")):t==="/partials/shopping-list.html"&&(e.classList.remove("button"),o.classList.add("button"))});document.addEventListener("DOMContentLoaded",()=>{const t=window.location.pathname,e=document.getElementById("backdrop-home-link"),o=document.getElementById("backdrop-shopping-list-link");t==="/"?(e.classList.add("button"),o.classList.remove("button")):t==="/partials/shopping-list.html"&&(e.classList.remove("button"),o.classList.add("button"))});function S(){const t=document.getElementById("burger"),e=document.getElementById("backdrop"),o=document.querySelector(".icon-logo"),i=document.querySelector(".nav-links"),n=document.getElementById("x-close");t.checked?(t.checked=!1,e.style.display="none",i.style.height="0",n.style.display="none",o.style.display="block"):(t.checked=!0,e.style.display="block",i.style.height="100vh",n.style.display="block",o.style.display="none")}document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".icon-logo"),e=document.getElementById("x-close");t.addEventListener("click",S),e.addEventListener("click",S)});function F(){window.scrollTo({top:0,behavior:"smooth"})}window.onscroll=function(){J()};function J(){document.documentElement.scrollTop>250?document.getElementById("scrollUpButton").style.display="block":document.getElementById("scrollUpButton").style.display="none"}document.getElementById("scrollUpButton").addEventListener("click",F);async function R(){const{data:t}=await h.get("https://books-backend.p.goit.global/books/category-list");return t}async function $(){const{data:t}=await h.get("https://books-backend.p.goit.global/books/top-books");return t}async function T(t){const{data:e}=await h.get(`https://books-backend.p.goit.global/books/category?category=${t}`);return e}async function K(t){const{data:e}=await h.get(`https://books-backend.p.goit.global/books/${t}`);return e}const M=document.querySelector(".category-list"),p=document.querySelector(".books-list"),G=document.querySelector(".books-section-title");async function Y(){try{const t=await R();if(t.length===0)throw new Error;const o=t.map(({list_name:i})=>i).sort((i,n)=>i.localeCompare(n)).map(i=>Z(i)).join("");M.insertAdjacentHTML("beforeend",o)}catch(t){console.error(t)}}Y();function Z(t){return`<li class="category-item">
    <button class="category-btn" type="button" data-list-name="${t}">${t}</button>
  </li>`}async function Q(){try{G.style.display="none";const t=await $();if(t.length===0)throw new Error;const e=V(t,"Best Sellers Books");p.innerHTML=e}catch(t){console.error(t),p.innerHTML="<h2>Try reloading the page...</h2>"}}function V(t,e){return`${x(e)}
 <ul class="books-bestsellers">
        ${t.map(({books:n,list_name:s})=>tt(n,s)).join("")}
 </ul>`}async function X(t){try{const e=await T(t);if(e.length===0)return;const o=q(e,t);p.innerHTML=o}catch(e){console.error(e),p.innerHTML="<h2>Try reloading the page...</h2>"}}N();function q(t,e){return`${x(e)}
        <ul class="books-category">
            ${t.map(n=>_(n)).join("")}
        </ul>`}function tt(t,e){return`<li class="books-bestsellers-item">
            <p class="books-bestsellers-list-name">${e}</p>
            <ul class="books-bestsellers-list">
                ${t.map(o=>_(o)).join("")}
            </ul>
            <button
                class="books-bestsellers-btn"
                type="button"
                data-list-name="${e}">
                See more
            </button>
        </li>`}function _(t){const{_id:e,book_image:o,book_image_width:i,book_image_height:n,publisher:s,title:r}=t;return`<li class="books-item">
        <div class="books-overley-box">
            <img
                class="books-image"
                src="${o}"
                    width="${i}"
                    height="${n}"
                    loading="lazy"
                    data-id="${e}"
                />
            <div class="books-overley">quick view</div>
        </div>
        <h4 class="books-title-book">${r}</h4>
        <span class="books-author">${s}</span>
    </li>`}function x(t){const e=t.split(" "),o=e.splice(length-1,1).join("");return`<h2 class="books-title">${e.join(" ")}
        <span class="books-title-accent">${o}</span>
    </h2>`}let E="";function O(t){const e=t.target,o=e.dataset.listName;e.tagName!=="BUTTON"||E===o||(o!=="bestsellers"?X(o):Q(),E=o)}M.addEventListener("click",O);p.addEventListener("click",O);async function N(){try{const t=await $(),e=document.querySelector(".books-list");e.innerHTML="";let o=1;window.innerWidth>=768&&window.innerWidth<1440?o=3:window.innerWidth>=1440&&(o=5),B(t,4).map(n=>{const s=document.createElement("li");s.classList.add("category");const r=document.createElement("h2");r.textContent=n.list_name,r.classList.add("category-title"),s.appendChild(r);const a=B(n.books,o),c=document.createElement("ul");c.classList.add("books-container"),a.map(m=>{const b=document.createElement("li");b.classList.add("book-item");const W=`
            <div class = "book-overley-box"><img src="${m.book_image}" alt="${m.title}" class="book-image" data-id="${m._id}"><div class = "book-overley">quick view</div></div>
            <h4 class="book-title">${m.title}</h4>
            <span class="book-author">${m.author}</span>
        `;b.innerHTML=W,c.appendChild(b)}),s.appendChild(c);const l=document.createElement("div");l.classList.add("see-more-button-container");const d=document.createElement("button");d.classList.add("see-more-button"),d.textContent="See more",d.addEventListener("click",()=>{et(n.list_name)}),l.appendChild(d),s.appendChild(l),e.appendChild(s)})}catch(t){console.error("Error fetching books:",t)}}async function et(t){try{const e=await T(t),o=document.querySelector(".books-list"),i=q(e,t);o.innerHTML=i,document.querySelector(".books-section-title").remove();const s=document.createElement("div");s.classList.add("books-container"),e.map(r=>{const a=document.createElement("div");a.classList.add("book-item"),a.setAttribute("id",r._id);const c=`
        <div class="book-info book-in-category">
          <img src="${r.book_image}" alt="${r.title}" class="book-image">
          <h3 class="book-title">${r.title}</h3>
          <p class="book-author">${r.author}</p>
        </div>
      `;a.innerHTML=c,s.appendChild(a)}),o.appendChild(s)}catch(e){console.error("Error fetching books:",e)}}function B(t,e){return t.sort(()=>.5-Math.random()).slice(0,e)}N();const ot=[{title:"Save the Children",url:"https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis",img:"../img/SupportUkraine/01-found-1.png",width:131,height:32},{title:"Project HOPE",url:"https://www.projecthope.org/country/ukraine/",img:"../img/SupportUkraine/02-found-1.png",width:62,height:32},{title:"UNITED24",url:"https://u24.gov.ua/uk",img:"../img/SupportUkraine/03-found-1.png",width:114,height:32},{title:"International Medical Corps",url:"https://internationalmedicalcorps.org/country/ukraine/",img:"../img/SupportUkraine/04-found-1.png",width:103,height:32},{title:"Medicins Sans Frontieres",url:"https://www.msf.org/ukraine",img:"../img/SupportUkraine/05-found-1.png",width:78,height:32},{title:"RAZOM",url:"https://www.razomforukraine.org/",img:"../img/SupportUkraine/06-found-1.png",width:82,height:32},{title:"Action against hunger",url:"https://www.actionagainsthunger.org/location/europe/ukraine/",img:"../img/SupportUkraine/07-found-1.png",width:55,height:32},{title:"World vision",url:"https://www.wvi.org/emergencies/ukraine",img:"../img/SupportUkraine/08-found-1.png",width:81,height:32},{title:"Serhiy Prytula Charity Foundation",url:"https://prytulafoundation.org/en",img:"../img/SupportUkraine/09-found-1.png",width:115,height:32}],nt=document.querySelector(".splide__list");let U=[];ot.forEach(({title:t,url:e,img:o,width:i,height:n},s)=>{const r=(s+1).toString().padStart(2,"0"),a=document.createElement("li"),c=document.createElement("a"),l=document.createElement("img"),d=document.createElement("p");l.src=o,l.alt=t,l.width=i,l.height=n,c.href=e,d.textContent=r,c.target="_blank",c.append(l),a.append(d),a.append(c),a.classList.add("splide__slide"),a.classList.add("item-donation"),c.classList.add("item-link-donation"),l.classList.add("item-img-donation"),d.classList.add("p-num-donation"),U.push(a)});nt.append(...U);const g=new z(".splide",{direction:"ttb",height:292,pagination:!1,perMove:4,perPage:6,gap:20,fixedHeight:32,arrows:!1,speed:800});g.mount();let y=0;const st=document.querySelector(".scroll-button-donations"),I=document.querySelector(".use-svg");st.addEventListener("click",()=>{y===0?(g.go(g.length-1,!1),y=g.length-1,I.style.transform="rotate(180deg)"):(g.go(0,!1),y=0,I.style.transform="rotate(0deg)")});const u={books:document.querySelector(".books-section"),modal:document.querySelector(".modal-backdrop"),xBtn:document.querySelector(".x-btn"),backdrop:document.querySelector(".modal-backdrop"),oneBook:document.querySelectorAll(".books-item"),modalContent:document.querySelector(".modal-content-wrapper"),descriptionBookEl:document.querySelector(".descr-of-book")};u.books.addEventListener("click",it);let f=null,v=null;async function it(t){if(t.preventDefault(),t.target.nodeName!=="IMG")return;const e=t.target.dataset.id;u.modal.classList.add("is-open"),document.body.classList.add("no-scroll"),u.backdrop.addEventListener("click",H),u.xBtn.addEventListener("click",k),window.addEventListener("keydown",A),await at(e),v=document.querySelector(".add-to-localSt"),v.addEventListener("click",P)}function k(t){u.backdrop.removeEventListener("click",H),u.xBtn.removeEventListener("click",k),window.removeEventListener("keydown",A),v.removeEventListener("click",P),document.body.classList.remove("no-scroll"),u.modal.classList.remove("is-open")}function A(t){t.key==="Escape"&&k()}function H(t){t.target===t.currentTarget&&k()}function P(){const t="selected-books",e=JSON.parse(localStorage.getItem(t))||[],o=f._id,i=e.some(r=>r._id===o);if(i){const r=e.filter(a=>a._id!==o);localStorage.setItem(t,JSON.stringify(r))}else e.push(f),localStorage.setItem(t,JSON.stringify(e));const n=document.querySelector(".add-to-localSt"),s=i?"Add to Shopping List":"Remove from Shopping List";n.textContent=s,rt(!i)}function rt(t){const e=document.querySelector(".add-to-localSt"),o=t?"Remove from Shopping List":"Add to Shopping List";e.textContent=o}async function at(t){var e;u.modalContent.innerHTML="";try{const o=await K(t),{book_image:i,title:n,author:s,description:r,buy_links:a}=o;f=o;const c=!!((e=JSON.parse(localStorage.getItem("selected-books")))!=null&&e.find(d=>d._id===o._id)),l=`<div class="modal-content">
        <img class="book-img-modal" src="${i}" alt="book-image">
        <div class="modal-text-wrap">
            <div class="name-of-book">
                <h3 class="title-of-book">${n}</h3>
                <p class="author-of-book">${s}</p>
            </div>
            <p class="descr-of-book">${r}</p>
            <div class="buy-links">
                <a href="${a[0].url}" target="_blank" class="amazon-link"> <svg class="amazon" width="16" height="16">
                  <use href="../img/icons.svg#icon-amazon"></use>
              </svg></a>

                        
             
          </a>
                <a href="${a[1].url}" target="_blank" class="apple-link"><img class="apple-link-img" src="../img/apple-shop-1x.png"
                        alt="link"></a>
            </div>
           </div>
        </div>
        <button class="add-to-localSt" type="button">${c?"remove from the shopping list":"add to shopping list"}</button>`;u.modalContent.innerHTML=l}catch(o){alert(`Something went wrong. You caught the following error: ${o.message}.`)}}const j=document.getElementById("loading-bar"),ct=document.querySelector(".progress-bar");function L(){j.style.opacity=1}function w(){j.style.opacity=0}function D(t){ct.style.width=`${t}%`}window.addEventListener("load",()=>{L(),D(100),setTimeout(w,500)});const lt=document.querySelectorAll("button");lt.forEach(t=>{t.addEventListener("click",()=>{L();let e=0;const o=setInterval(()=>{e+=10,D(e),e===100&&(clearInterval(o),w())},100)})});document.body.addEventListener("click",t=>{const e=t.target;e.tagName==="A"&&e.href.startsWith("/")&&L()});document.addEventListener("pagehide",w);
//# sourceMappingURL=commonHelpers.js.map
